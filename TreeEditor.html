<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OSRS Plugin - Node Editor</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="TreeEditor.css">
</head>
<body>

    <div class="editor-container">
        <div class="osrs-panel tree-panel" id="tree-panel">
            <div id="tree-canvas">
                <svg id="tree-svg" class="tree-svg-layer"></svg>
                <div class="tree-container" id="tree-container"></div>
            </div>
            <div id="selection-box"></div>
            <div id="mini-map">
                <div id="mini-map-nodes"></div>
                <div id="mini-map-viewport"></div>
            </div>
        </div>

        <div class="osrs-panel controls-panel">
            <h2>Node Editor</h2>
            
             <div class="form-box">
                <div class="form-box" style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                    <label for="snap-to-grid" style="color: var(--text-light-grey); font-size: 10px; flex-grow: 1;">Snap to Grid</label>
                    <input type="checkbox" id="snap-to-grid" checked style="width: auto; height: auto;">
                </div>
                <input type="text" id="new-node-name" class="osrs-input" placeholder="New node name...">
                <button class="action-btn" id="create-node-btn" style="margin-top: 10px;">Create New Node</button>
            </div>

            <div class="info-box">
                <p>Selected: <span id="info-node-name">None</span></p>
                <p>X: <span id="info-node-x">--</span>, Y: <span id="info-node-y">--</span></p>
            </div>

            <button class="action-btn" id="delete-node-btn" style="background-color: #8c3838; display: none; margin-top: 10px;">Delete Selected</button>
            <button class="action-btn" id="link-mode-btn" style="display: none; margin-top: 10px;">Link/Unlink Children</button>
            <button class="action-btn" id="unlink-all-btn" style="display: none; margin-top: 5px; background-color: #ac5f5f;">Unlink All Children</button>

            <button class="action-btn" id="quick-add-link-btn" style="margin-top: 10px;">Quick-Add & Link</button>

            <div id="edit-node-panel">
                <input type="text" id="edit-node-name" class="osrs-input" placeholder="Rename node...">
                <button class="action-btn" id="rename-node-btn" style="margin-top: 10px;">Rename Selected</button>

                <textarea id="edit-node-desc" class="osrs-input" placeholder="Node description..." rows="3" style="margin-top: 15px;"></textarea>
                <div id="canned-desc-buttons" style="display: flex; gap: 5px; margin-top: 5px;">
                    <button class="canned-btn" data-template="Unlock the [NAME] skill.">Skill</button>
                    <button class="canned-btn" data-template="Unlock the ability to wear [NAME].">Armour</button>
                    <button class="canned-btn" data-template="Unlock the ability to wield [NAME].">Weapon</button>
                    <button class="canned-btn" data-template="Begin the [NAME] quest.">Quest</button>
                </div>
                <button class="action-btn" id="update-desc-btn" style="margin-top: 10px;">Update Description</button>
                
                <div id="resize-panel" style="margin-top: 15px;">
                    <h4 style="font-size: 10px; color: var(--text-yellow); margin: 0 0 5px 0; text-align: center;">Resize Node</h4>
                    <div style="display: flex; gap: 5px;">
                        <button class="canned-btn" data-size="minor">Minor</button>
                        <button class="canned-btn" data-size="major">Major</button>
                        <button class="canned-btn" data-size="epic">Epic</button>
                        <button class="canned-btn" data-size="legendary">Legendary</button>
                    </div>
                </div>
            </div>

            <div id="icon-picker-panel" style="display: none;">
                <h3>Change Icon</h3>
                <div id="icon-pool"></div>
            </div>

            <div id="node-list-panel">
                <h3>All Nodes <span id="node-counter" style="float: right;"></span></h3>
                <input type="text" id="node-search" class="osrs-input" placeholder="Search nodes...">
                <div id="node-category-filters"></div>
                <ul id="node-list"></ul>
            </div>

            <button class="action-btn" id="save-btn">Save Tree to File</button>
            <button class="action-btn" id="load-btn" style="margin-top: 10px;">Load Tree from File</button>
            <input type="file" id="file-loader" style="display: none;" accept=".json">
        </div>
    </div>

    <script src="TreeEditor.js"></script>
</body>
</html>